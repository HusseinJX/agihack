<!doctype html>
<html>
<head>
  <title>Fly-Out Assistant</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 1200px;
      margin: 40px auto;
      padding: 20px;
      background: #f5f7fa;
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      align-items: start;
    }
    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
      }
    }
    h2 {
      color: #2d3748;
      margin-bottom: 30px;
    }
    form {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-bottom: 20px;
      color: #4a5568;
      font-weight: 500;
    }
    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      box-sizing: border-box;
      transition: border-color 0.2s;
    }
    input[type="text"]:focus,
    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: #667eea;
    }
    /* Custom Date Picker Styles */
    .date-picker-wrapper {
      position: relative;
      width: 100%;
    }
    .date-input {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      box-sizing: border-box;
      transition: border-color 0.2s;
      cursor: pointer;
      background: white;
    }
    .date-input:focus {
      outline: none;
      border-color: #667eea;
    }
    .date-picker-popup {
      position: absolute;
      top: 100%;
      left: 0;
      margin-top: 4px;
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      z-index: 1000;
      padding: 20px;
      min-width: 300px;
      display: none;
    }
    .date-picker-popup.show {
      display: block;
    }
    .date-picker-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    .date-picker-nav {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    .date-picker-nav button {
      background: #f7fafc;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      color: #4a5568;
      transition: all 0.2s;
    }
    .date-picker-nav button:hover {
      background: #edf2f7;
    }
    .date-picker-month-year {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .date-picker-month-year select {
      padding: 6px 10px;
      border: 2px solid #e2e8f0;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      background: white;
      margin: 0;
      width: auto;
      min-width: 100px;
    }
    .date-picker-month-year select:focus {
      outline: none;
      border-color: #667eea;
    }
    .date-picker-calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
    }
    .date-picker-weekday {
      text-align: center;
      font-weight: 600;
      color: #718096;
      font-size: 12px;
      padding: 8px 4px;
    }
    .date-picker-day {
      text-align: center;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
      border: 1px solid transparent;
    }
    .date-picker-day:hover {
      background: #edf2f7;
    }
    .date-picker-day.other-month {
      color: #cbd5e0;
    }
    .date-picker-day.today {
      background: #e6fffa;
      color: #667eea;
      font-weight: 600;
    }
    .date-picker-day.selected {
      background: #667eea;
      color: white;
      font-weight: 600;
    }
    .date-picker-day.selected:hover {
      background: #5568d3;
    }
    button[type="submit"] {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    button[type="submit"]:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    button[type="submit"]:active {
      transform: translateY(0);
    }
    .note {
      margin-top: 20px;
      padding: 15px;
      background: #edf2f7;
      border-radius: 8px;
      color: #4a5568;
      font-size: 14px;
    }
    .process-card {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .process-card h3 {
      color: #2d3748;
      margin-bottom: 24px;
      font-size: 20px;
    }
    .process-step {
      display: flex;
      align-items: flex-start;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e2e8f0;
    }
    .process-step:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    .step-number {
      flex-shrink: 0;
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      margin-right: 16px;
    }
    .step-content {
      flex: 1;
    }
    .step-title {
      color: #2d3748;
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 15px;
    }
    .step-description {
      color: #718096;
      font-size: 13px;
      line-height: 1.5;
    }
  </style>
  <script>
    // Custom Date Picker Implementation
    document.addEventListener('DOMContentLoaded', function() {
      const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                         'July', 'August', 'September', 'October', 'November', 'December'];
      const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      
      function formatDate(date) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
      }
      
      function formatDisplayDate(date) {
        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      }
      
      function createDatePicker(input, hiddenInput, popup, defaultDate = null) {
        let currentDate = defaultDate ? new Date(defaultDate) : new Date();
        let selectedDate = defaultDate ? new Date(defaultDate) : null;
        let isOpen = false;
        
        // Set initial display and hidden values if default date is provided
        if (defaultDate && selectedDate) {
          input.value = formatDisplayDate(selectedDate);
          hiddenInput.value = formatDate(selectedDate);
        }
        
        function renderCalendar() {
          const year = currentDate.getFullYear();
          const month = currentDate.getMonth();
          const firstDay = new Date(year, month, 1);
          const lastDay = new Date(year, month + 1, 0);
          const startDate = new Date(firstDay);
          startDate.setDate(startDate.getDate() - startDate.getDay());
          
          let html = '<div class="date-picker-header">';
          html += '<div class="date-picker-nav">';
          html += '<button class="prev-month-btn">&lt;</button>';
          html += '<div class="date-picker-month-year">';
          html += `<select class="month-select">`;
          for (let i = 0; i < 12; i++) {
            html += `<option value="${i}" ${i === month ? 'selected' : ''}>${monthNames[i]}</option>`;
          }
          html += '</select>';
          html += `<select class="year-select">`;
          for (let y = year - 10; y <= year + 10; y++) {
            html += `<option value="${y}" ${y === year ? 'selected' : ''}>${y}</option>`;
          }
          html += '</select>';
          html += '</div>';
          html += '<button class="next-month-btn">&gt;</button>';
          html += '</div></div>';
          
          html += '<div class="date-picker-calendar">';
          weekdays.forEach(day => {
            html += `<div class="date-picker-weekday">${day}</div>`;
          });
          
          const today = new Date();
          today.setHours(0, 0, 0, 0);
          
          let date = new Date(startDate);
          for (let i = 0; i < 42; i++) {
            const dateStr = formatDate(date);
            const isOtherMonth = date.getMonth() !== month;
            const isToday = dateStr === formatDate(today);
            const isSelected = selectedDate && dateStr === formatDate(selectedDate);
            
            let classes = 'date-picker-day';
            if (isOtherMonth) classes += ' other-month';
            if (isToday) classes += ' today';
            if (isSelected) classes += ' selected';
            
            html += `<div class="${classes}" data-date="${dateStr}">${date.getDate()}</div>`;
            date.setDate(date.getDate() + 1);
          }
          
          html += '</div>';
          popup.innerHTML = html;
          
          // Add event listeners for navigation
          popup.querySelector('.prev-month-btn').addEventListener('click', function(e) {
            e.stopPropagation();
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
          });
          
          popup.querySelector('.next-month-btn').addEventListener('click', function(e) {
            e.stopPropagation();
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
          });
          
          popup.querySelector('.month-select').addEventListener('change', function(e) {
            e.stopPropagation();
            currentDate.setMonth(parseInt(this.value));
            renderCalendar();
          });
          
          popup.querySelector('.year-select').addEventListener('change', function(e) {
            e.stopPropagation();
            currentDate.setFullYear(parseInt(this.value));
            renderCalendar();
          });
          
          // Add event listeners for date selection
          popup.querySelectorAll('.date-picker-day').forEach(day => {
            day.addEventListener('click', function(e) {
              e.stopPropagation();
              const dateStr = this.getAttribute('data-date');
              const [y, m, d] = dateStr.split('-').map(Number);
              selectedDate = new Date(y, m - 1, d);
              input.value = formatDisplayDate(selectedDate);
              hiddenInput.value = formatDate(selectedDate);
              popup.classList.remove('show');
              isOpen = false;
            });
          });
        }
        
        // Toggle picker
        input.addEventListener('click', function(e) {
          e.preventDefault();
          if (!isOpen) {
            // Close other pickers
            document.querySelectorAll('.date-picker-popup.show').forEach(p => {
              p.classList.remove('show');
            });
            popup.classList.add('show');
            isOpen = true;
            renderCalendar();
          } else {
            popup.classList.remove('show');
            isOpen = false;
          }
        });
        
        // Close on outside click
        document.addEventListener('click', function(e) {
          if (!popup.contains(e.target) && e.target !== input) {
            popup.classList.remove('show');
            isOpen = false;
          }
        });
      }
      
      // Initialize date pickers
      const departInput = document.querySelector('input[name="depart_date"]');
      const departHidden = document.querySelector('input[name="depart_date_value"]');
      const departPopup = document.getElementById('departDatePicker');
      if (departInput && departPopup) {
        // Set default date to July 19, 2024
        const defaultDepartDate = new Date(2024, 6, 19); // Month is 0-indexed, so 6 = July
        createDatePicker(departInput, departHidden, departPopup, defaultDepartDate);
      }
      
      const returnInput = document.querySelector('input[name="return_date"]');
      const returnHidden = document.querySelector('input[name="return_date_value"]');
      const returnPopup = document.getElementById('returnDatePicker');
      if (returnInput && returnPopup) {
        createDatePicker(returnInput, returnHidden, returnPopup);
      }
      
      // Update form submission to use hidden inputs
      document.querySelector('form').addEventListener('submit', function(e) {
        const departHidden = document.querySelector('input[name="depart_date_value"]');
        const returnHidden = document.querySelector('input[name="return_date_value"]');
        
        if (departHidden && departHidden.value) {
          // Create a hidden input with the correct name for the form
          const hidden = document.createElement('input');
          hidden.type = 'hidden';
          hidden.name = 'depart_date';
          hidden.value = departHidden.value;
          this.appendChild(hidden);
        }
        
        if (returnHidden && returnHidden.value) {
          const hidden = document.createElement('input');
          hidden.type = 'hidden';
          hidden.name = 'return_date';
          hidden.value = returnHidden.value;
          this.appendChild(hidden);
        }
      });
    });
  </script>
</head>
<body>
  <h2>Fly someone out â€” quick workflow</h2>
  <div class="container">
    <form method=post action="/start">
      <label>
        From (city or airport code):
        <input type="text" name="from_location" placeholder="e.g. SFO, NYC" required>
      </label>
   
      <label>
        Depart date:
        <div class="date-picker-wrapper">
          <input type="text" class="date-input" name="depart_date" placeholder="Select date" readonly required>
          <input type="hidden" name="depart_date_value">
          <div class="date-picker-popup" id="departDatePicker"></div>
        </div>
      </label>

      <label>
        Eating preference:
        <select name="eat_mode">
          <option value="in">Eat in (order food)</option>
          <option value="out">Eat out (book restaurant)</option>
        </select>
      </label>
     
      <label>
        Number of travelers:
        <input type="number" name="num_travelers" min="1" value="1" required>
      </label>
      <button type="submit">Start Fly-Out Workflow</button>
    </form>

    <div class="process-card">
      <h3>6-Step Process</h3>
      <div class="process-step">
        <div class="step-number">1</div>
        <div class="step-content">
          <div class="step-title">Book Flight</div>
          <div class="step-description">Purchase airline tickets from the origin location to your destination</div>
        </div>
      </div>
      <div class="process-step">
        <div class="step-number">2</div>
        <div class="step-content">
          <div class="step-title">Order Transportation</div>
          <div class="step-description">Schedule an Uber ride from the airport, timed to arrive shortly after landing</div>
        </div>
      </div>
      <div class="process-step">
        <div class="step-number">3</div>
        <div class="step-content">
          <div class="step-title">Book Lodging</div>
          <div class="step-description">Reserve accommodation for the duration of the stay</div>
        </div>
      </div>
      <div class="process-step">
        <div class="step-number">4</div>
        <div class="step-content">
          <div class="step-title">Arrange Dining</div>
          <div class="step-description">Order food delivery or make restaurant reservations based on your preference</div>
        </div>
      </div>
      <div class="process-step">
        <div class="step-number">5</div>
        <div class="step-content">
          <div class="step-title">Schedule Calendar Events</div>
          <div class="step-description">Add important dates and activities to the calendar</div>
        </div>
      </div>
      <div class="process-step">
        <div class="step-number">6</div>
        <div class="step-content">
          <div class="step-title">Send Notifications</div>
          <div class="step-description">Generate and send confirmation messages via SMS and voice call</div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>